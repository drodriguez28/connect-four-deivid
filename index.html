<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Deivid Connect 4 </title>
    <style>
        /* this is setting the scroll bars to go away */

        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <script>
        "use strict";
        // game parameters
        const GRID_CIRCLE = 0.7; //circle size as a function of cell size 
        const GRID_COLS = 7; //number of game colums 
        const GRID_ROWS = 6; //number of game rows
        const MARGIN = 0.02;// margin as a fraction of the shortest screen dimension





        //color
        const COLOR_BACKGROUND = "mintcream";
        const COLOR_COMP = "red";
        const COLOR_COMP_DRK = "darkred";
        const COLOR_FRAME = "dodgerblue";
        const COLOR_FRAME_BUTT = "royalblue";
        const COLOR_PLAY = "yellow";
        const COLOR_PLAY_DRK = "olive";



        // classes 
        class Cell {
            constructor(left, top, w, h, row, col) {
                this.bot = top + h;
                this.left = left;
                this.right = right;
                this.top = top;
                this.w = w;
                this.h = h;
                this.row = row;
                this.col = col;
                this.cx = left + w / 2;
                this.cy = top + h / 2;
                this.r = w * GRID_CIRCLE / 2;
                this.owner = null;
            }
            // draw the circle 
            draw(/** @type {CanvasRenderingContext2D} */ ctx) {
                // owner colour 
                let color = this.owner == null ? COLOR_BACKGROUND : this.owner ? COLOR_PLAY : COLOR_COMP;

                //draw the circle
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.arc(this.cx, this.cy, this.r, 0, Math.Pi * 2);
                ctx.fill();

            }

        }





        // set up thr canvas and context 
        var canv = document.createElement("canvas");
        document.body.appendChild(canv);
        var ctx = canv.getContext("2d");


        //game vaiables 
        var grid = [];



        //dimentions
        var height, width, margin;
        setDimensions();


        //event listerner
        window.addEventListener("resize", setDimensions)


        // game loop 
        var timeDelta, timeLast;
        requestAnimationFrame(loop);


        function loop(timeNow) {
            //inital time last 
            if (!timeLast) {
                timeLast = timeNow;
            }
            //caulate the time diffrence
            timeDelta = (timeNow - timeLast) / 1000; //seconds
            timeLast = timeNow;
            // update 


            // draw
            drawBackground();
            drawGrid();

            //call the next frame 
            requestAnimationFrame(loop);

        }




        function createGrid() {
            grid = [];
            // set up cell size and margins
            let cell, marginX, marginY

            // portrait 
            if ((width - margin * 2) * GRID_ROWS / GRID_COLS < height - margin * 2) {
                cell = (width - margin * 2) / GRID_COLS;
                marginX = margin;
                marginY = (height - cell * GRID_ROWS) / 2;
                //landscape 
            }
            else {
                cell = (height - margin * 2) / GRID_ROWS;
                marginX = (width - cell * GRID_COLS) / 2;
                marginY = margin;
            }

            //populate the grid 
            for (let i = 0; i < GRID_ROWS; i++) {
                grid[i] = [];
                for (let j = 0; j < GRID_COLS; j++)
                    let left = marginX + j * cell;
                let top = marginY + i * cell;
                grid[i][j] = new Cell(left, top, cell, cell, i, j);
            }
        }




        function drawBackground() {
            ctx.fillStyle = COLOR_BACKGROUND;
            ctx.fillRect(0, 0, width, height)
        }




        function newGame() {
            createGrid();
        }

        function drawGrid() {
            //frame and butt
            let cell = grid[0][0];
            let fh = cell.h * GRID_ROWS;
            let fw = cell.w * GRID_COLS;
            ctx.fillStyle = COLOR_FRAME;
            ctx.fillRect(cell.left, cell.top, fw, fh);
        }


        function setDimensions() {

            height = window.innerHeight;
            width = window.innerWidth;
            canv.height = height;
            canv.width = width;
            margin = MARGIN * Math.min(height, width);
            newGame();


        }

    </script>
</body>

</html>


<!-- left off on 17:01 https://www.youtube.com/watch?v=vzxCC5ggyUc -->